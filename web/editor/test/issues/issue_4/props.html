<!DOCTYPE html>
<!--
Explore on-the-fly properties similar to C#
Mainly based on http://stackoverflow.com/questions/3208571/create-javascript-property-like-c-sharp-property
and my research.

Research not fully done as it becomes very complicated for what we need but "properties" look promissing.

Links for further readin:
    @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty
    @see http://ejohn.org/blog/ecmascript-5-objects-and-properties/#postcomment
-->
<html>
    <head>
        <title>On-the-fly object properties</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script type="text/javascript">

            //Class property. Trying to add a property to an object
            function A() {
                
            }
            
            A.prototype = {
                constructor: A             
            };
            
            //Attach a property to class A
            Object.defineProperty(A.prototype, "lineDashOffset", {
                    get: function() {
                        console.info("lineDashOffset get");
                        return this.val;
                    },
                    set: function(val) {
                        console.info("lineDashOffset set");
                        this.val = val;
                    }
            });
            
            
            function testPropertyForInstance(){
                //Instance property. Add a property to an object's instance
                var obj = {};
                Object.defineProperty(obj, "value", {
                    get: function() {
                        console.info("Value get");
                        return this.val;
                    },
                    set: function(val) {
                        console.info("Value set");
                        this.val = val;
                    }
                });
                
                obj.value = "ola";                
                var x = obj.value;
            }
            
            
            function testPropertyForClass(){
                //Test class property
                var a = new A();
                a.lineDashOffset = 5;
                var v = a.lineDashOffset;
            }

            function pageLoaded() {
                console.info("Loaded");

                
                testPropertyForClass();
                
            }
            
            

            window.addEventListener("load", pageLoaded, false);
        </script>
    </head>
    <body>
        <div>
            <canvas id="quilt" width="300" height="300"></canvas>
        </div>
    </body>
</html>
